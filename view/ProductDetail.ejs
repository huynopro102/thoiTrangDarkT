<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Products</title>


    <!-- Favicon -->
    <link rel="icon" type="image/png" sizes="32x32" href="https://thoitrangdarkt-com.onrender.com/congkhai/assets/images/logo2.png">
    <!-- Remix icons -->
    <link href="https://cdn.jsdelivr.net/npm/remixicon@2.5.0/fonts/remixicon.css" rel="stylesheet">
    <!-- Swiper.js -->
    <link rel="stylesheet" href="https://thoitrangdarkt-com.onrender.com/congkhai/assets/css/swiper-bundle.min.css" />
    <!-- link css -->
    <link rel="stylesheet" href="https://thoitrangdarkt-com.onrender.com/congkhai/assets/css/style.css">


    <!-- bắt sự kiện onclick đăng xuất -->
    <link rel="stylesheet" href="https://thoitrangdarkt-com.onrender.com/congkhai/btn_dang_xuat.js">

    <!-- link css page product -->
    <link rel="stylesheet" href="https://thoitrangdarkt-com.onrender.com/congkhai/img_product/sub_header_footer.css">

    <!-- link css an hien gio hang -->
    <link rel="stylesheet" href="https://thoitrangdarkt-com.onrender.com/congkhai/giohang.css">


    <style>
        /* Add or modify CSS rules in your style section */
        .section_sub {
            padding: 40px;
            /* Adjust the padding according to your design */
            background-color: #f4f4f4;
            margin-top: 73px;
        }

        .wrap {
            display: flex;
            justify-content: center;
            align-items: center;
        }

        .image_sub {
            width: 30%;
            border-radius: 2px solid red;
        }

        .subwrap {
            max-width: 800px;
            margin: 20px;
            /* Add margin to separate from the edges */
            padding: 20px;
            /* Add padding for a better visual appearance */
            background-color: #fff;
            /* Set a background color */
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
            /* Add a subtle box shadow */
            border-radius: 8px;
            /* Add border-radius for rounded corners */
        }

        .subwrap h2 {
            font-size: 24px;
            /* Adjust the font size of the heading */
            color: #333;
            /* Set the color of the heading */
        }

        .form-check {
            margin-top: 20px;
        }


        /* btn success */
        .btn-success {
            background-color: #28a745;
            /* Set the background color for the success button */
            color: #fff;
            /* Set the text color for the success button */
            border: none;
            /* Remove the button border */
            padding: 4px;
            cursor: pointer;
            border-radius: 4px;
        }

        /* btn primary */
        .btn-success:hover {
            background-color: #218838;
            /* Darken the background color on hover */
        }

        .btn-primary {
            background-color: #28a745;
            /* Set the background color for the success button */
            color: #fff;
            /* Set the text color for the success button */
            border: none;
            padding: 4px;
            cursor: pointer;
            border-radius: 4px;
            margin-bottom: 8px;
        }

        .btn-primary:hover {
            background-color: #218838;

        }

        /* radio */
        .form-check {
            margin-top: 8px;
            margin-bottom: 8px;

        }

        .form-check-label,
        .form-check-input {
            cursor: pointer;
        }
    </style>
</head>

<body>
    <!-- Header -->
    <header class="header header_pt" id="header" style="padding: 0px;">
        <nav class="navbar container">
            <div class="logo">
                <a href="/">
                    <h3 class="animate-charcter">DarkT</h3>
                </a>
            </div>

            <!-- <h2 class="name">Nyx</h2> -->

            <div class="menu" id="menu">
                <ul class="list">
                    <li class="list-item">
                        <a href="/" class="list-link ">Trang Chủ</a>
                    </li>
                    <li class="list-item">
                        <a href="/products" class="list-link">Sản Phẩm</a>
                    </li>
                    <li class="list-item">
                        <a href="/products" class="list-link">giỏ hàng</a>
                    </li>
                    <li class="list-item">
                        <a href="/contact" class="list-link">Liên Hệ</a>
                    </li>

                    <li class="list-item">
                        <a href="#" class="list-link screen-lg-hidden">Đăng nhập</a>
                    </li>
                    <li class="list-item">
                        <a href="#" class="list-link screen-lg-hidden">Đăng ký</a>
                    </li>
                </ul>
            </div>

            <div class="list list-right">

                <button class=" btn place-items-center" id="cart-icon">

                </button>

                <input type="text" hidden class="id_user" value="<%= user.id%>">
                <h3 class="click_profile" style="cursor: pointer;">
                    <%= data.length==0 ? '' : 'xin chào ' +data %>
                </h3>
                <%= console.log("data1 : ",data ) %>
                <%= console.log(" user1 : ",user ) %>


                <button class=" btn_icon_cart place-items-center" id="cart-icon">

                    <span class="icon_show_cart">0</span>

                    <i class="ri-shopping-cart-line"></i>

                    </button>


                    <!-- gio hang -->
                    <div class="showcart none">
                        <div class="row mb">
                            <table class="table-header">
                                <tr>
                                    <th>STT</th>
                                    <th>Hình</th>
                                    <th>Tên</th>
                                    <th>giá</th>
                                    <th>Số lượng</th>
                                    <th>Thành tiền</th>
                                </tr>

                                <!--  danh sach san pham -->
                                <tbody class="my_cart">

                                    <tr>
                                        <td>1</td>
                                        <td><img style="width: 50px;"
                                                src="https://thoitrangdarkt-com.onrender.com/congkhai/img_product/1702134099453-323829208-aobaba2.png"
                                                alt=""></td>
                                        <td>Đồng hồ</td>
                                        <td>10</td>
                                        <td>1</td>
                                        <td>
                                            <div>10</div>
                                        </td>
                                    </tr>


                                    <tr>
                                        <td>1</td>
                                        <td><img style="width: 50px;"
                                                src="https://thoitrangdarkt-com.onrender.com/congkhai/img_product/1702134099453-323829208-aobaba2.png"
                                                alt=""></td>
                                        <td>Đồng hồ</td>
                                        <td>10</td>
                                        <td>1</td>
                                        <td>
                                            <div>10</div>
                                        </td>
                                    </tr>

                                    <tr>
                                        <td>1</td>
                                        <td><img style="width: 50px;"
                                                src="https://thoitrangdarkt-com.onrender.com/congkhai/img_product/1702134099453-323829208-aobaba2.png"
                                                alt=""></td>
                                        <td>Đồng hồ</td>
                                        <td>10</td>
                                        <td>1</td>
                                        <td>
                                            <div>10</div>
                                        </td>
                                    </tr>

                                </tbody>


                                <tr>
                                    <th colspan="5">Tổng đơn hàng</th>
                                    <th>
                                        <div class="tong_don_hang">10</div>
                                    </th>
                                </tr>

                            </table>
                        </div>
                    </div>

                    <button class="btn place-items-center screen-lg-hidden menu-toggle-icon" id="menu-toggle-icon">
                        <i class="ri-menu-3-line open-menu-icon"></i>
                        <i class="ri-close-line close-menu-icon"></i>
                    </button>

                    <% if(data.length>0 ) { %>
                        <form action="/" method="post">
                            <button type="submit" class="list-link screen-sm-hidden">
                                Đăng Xuất
                            </button>
                        </form>
                        <% } else { %>
                            <a href="/login" class="list-link screen-sm-hidden">
                                Đăng nhập
                            </a>
                            <% } %>
                                <a href="/register" class="list-link screen-sm-hidden btn sign-up-btn fancy-border">
                                    <span>Đăng ký</span>
                                </a>

            </div>
        </nav>

    </header>

    <!-- section -->
    <section class="section_sub">
        <div class="wrap">
            <img src="https://thoitrangdarkt-com.onrender.com/congkhai/img_product/<%= user.image%>" class="image_sub" alt="" srcset="">
            <div class="subwrap">
                <h2>
                    <%= user.name%>
                </h2>
                <h3>
                    <%= user.price%>$
                </h3>
                <div class="form-check">
                    <input class="form-check-input" type="radio" name="flexRadioDefault" id="flexRadioDefault1">
                    <label class="form-check-label" for="flexRadioDefault1">
                        size S
                    </label>
                </div>
                <div class="form-check">
                    <input class="form-check-input" type="radio" name="flexRadioDefault" id="flexRadioDefault2" checked>
                    <label class="form-check-label" for="flexRadioDefault2">
                        size M
                    </label>
                </div>
                <div class="form-check">
                    <input class="form-check-input" type="radio" name="flexRadioDefault" id="flexRadioDefault3" checked>
                    <label class="form-check-label" for="flexRadioDefault3">
                        size L
                    </label>
                </div>
                <button type="button" onclick="them_vao_gio_hang(this)" class="btn btn-success">thêm giỏ hàng</button>
                <button type="button" class="btn btn-primary">trở lại</button>
                <p>Lorem ipsum dolor sit amet consectetur, adipisicing elit. Veniam, sequi tempora
                    obcaecati laborum ut aliquid similique nobis error blanditiis delectus eum quibusdam.
                    Sint, repellendus esse. Consectetur facere quod necessitatibus quae.</p>

            </div>
        </div>
    </section>


    <!-- Footer -->
    <footer class="footer section">

        <div class="footer-container container d-grid">

            <div class="company-data">
                <a href="/">
                    <!-- <img src="./assets/images/icon.png" alt=""> -->
                    <h3 class="animate-charcter">DarkT </h3>
                </a>
                <p class="company-description">
                    DarkT - Nơi tinh tế gặp gỡ với phong cách. Chúng tôi không chỉ bán hàng,
                    chúng tôi tạo nên trải nghiệm độc đáo cho khách hàng.
                </p>

                <ul class="list social-media">
                    <li class="list-item">
                        <a href="https://www.facebook.com/Narutocunung/" class="list-link">
                            <i class="ri-facebook-circle-line"></i>
                        </a>
                        <a href="https://www.instagram.com/khanhho741/" class="list-link">
                            <i class="ri-instagram-line"></i>
                        </a>
                        <a href="https://twitter.com/khanhho741" class="list-link">
                            <i class="ri-twitter-line"></i>
                        </a>
                        <a href="#" class="list-link">
                            <i class="ri-youtube-line"></i>
                        </a>
                    </li>
                </ul>

                <span class="copyright-notice">&copy; 2022 DarkT. All rights reserved</span>
            </div>

            <div>
                <h6 class="title footer-title">Danh Mục</h6>

                <ul class="list footer-list">
                    <li class="list-item">
                        <a href="#" class="list-link">Thời Trang</a>
                    </li>
                    <li class="list-item">
                        <a href="#" class="list-link">Nghệ Thuật Sáng Tạo
                        </a>
                    </li>
                    <li class="list-item">
                        <a href="#" class="list-link">Cosplay</a>
                    </li>
                    <li class="list-item">
                        <a href="#" class="list-link">Công Nghệ
                        </a>
                    </li>
                    <li class="list-item">
                        <a href="#" class="list-link">Thể Thao
                        </a>
                    </li>
                    <li class="list-item">
                        <a href="#" class="list-link">Khoa Học
                        </a>
                    </li>
                </ul>
            </div>

            <div>
                <h6 class="title footer-title">Liên Kết Hữu Ích</h6>

                <ul class="list footer-list">
                    <li class="list-item">
                        <a href="#" class="list-link">Trang chủ</a>
                    </li>
                    <li class="list-item">
                        <a href="#" class="list-link">Yếu tố</a>
                    </li>
                    <li class="list-item">
                        <a href="#" class="list-link">Thẻ</a>
                    </li>
                    <li class="list-item">
                        <a href="#" class="list-link">Tác giả</a>
                    </li>
                    <li class="list-item">
                        <a href="#" class="list-link">Thành viên</a>
                    </li>
                    <li class="list-item">
                        <a href="#" class="list-link">Vấn đề</a>
                    </li>
                </ul>
            </div>

            <div>
                <h6 class="title footer-title">Công Ty</h6>

                <ul class="list footer-list">
                    <li class="list-item">
                        <a href="#" class="list-link">Liên hệ chúng tôi</a>
                    </li>
                    <li class="list-item">
                        <a href="#" class="list-link">F.A.Q</a>
                    </li>
                    <li class="list-item">
                        <a href="#" class="list-link">Sự nghiệp</a>
                    </li>
                    <li class="list-item">
                        <a href="#" class="list-link">Người sáng lập</a>
                    </li>
                    <li class="list-item">
                        <a href="#" class="list-link">Thành viên</a>
                    </li>
                    <li class="list-item">
                        <a href="#" class="list-link">Địa chỉ</a>
                    </li>
                </ul>
            </div>
        </div>
    </footer>


    <!-- Nhúng JavaScript -->
    <script src="https://thoitrangdarkt-com.onrender.com/congkhai/assets/js/main.js"></script>

    <!-- nhúng jQuery -->
    <script src="https://code.jquery.com/jquery-3.7.1.js"
        integrity="sha256-eKhayi8LEQwp4NKxN+CfCh+3qOVUtJn3QNZ0TciWLP4=" crossorigin="anonymous">
        </script>
    <script>

        // Đảm bảo mã JavaScript chạy sau khi trang đã tải hoàn toàn
        $(document).ready(function () {
            // Lắng nghe sự kiện click trên nút "trở lại"
            $(".btn-primary").click(function () {
                // Chuyển hướng đến đường dẫn /products
                window.location.href = "/products";
            });

            $(".click_profile").click(() => {
                window.location.href = `/profile/${document.querySelector(".id_user").value}`;
            })
        });



        function them_vao_gio_hang(e) {
            const data = e.parentElement.children;


            let hinh = e.parentElement.parentElement.children[0].src
            let tensp = e.parentElement.children[0].innerText;
            let soluongsp = 1
            let gia = e.parentElement.children[1].innerText.replace("$", "")

            let sp = {
                hinh: hinh,
                tensp: tensp,
                soluongsp: soluongsp,
                gia: gia
            };

            // Lấy dữ liệu hiện tại từ localStorage (nếu có)
            let giohang = JSON.parse(localStorage.getItem("giohang")) || [];

            // Thêm sản phẩm vào giỏ hàng
            giohang.push(sp);

            // Lưu lại giỏ hàng mới vào localStorage
            localStorage.setItem("giohang", JSON.stringify(giohang));

            // Cập nhật số lượng trên biểu tượng giỏ hàng
            capNhatSoLuong(giohang.length);
        }


        //  an hien gio hang
        document.addEventListener("DOMContentLoaded", function () {
            const cartIcon = document.querySelector(".btn_icon_cart")
            const showCart = document.querySelector(".showcart");

            // Show cart
            cartIcon.addEventListener("click", function () {
                loadDuLieuVoGioHang()
                showCart.classList.toggle("block")
                loadDuLieuVoGioHang()
            });


        });
        // cap nhat gio hang
        function capNhatSoLuong(sl) {
            const icon_show_cart = document.querySelector(".icon_show_cart")
            icon_show_cart.innerText = sl
        }

        // load du lieu vo gio hang
        function loadDuLieuVoGioHang() {
            let tongDonHang = 0;

            // Lấy dữ liệu từ localStorage
            let giohang = JSON.parse(localStorage.getItem("giohang")) || [];

            // Hiển thị sản phẩm trong giỏ hàng
            document.querySelector(".my_cart").innerHTML = giohang.map((item, index) => {
                let tongThanhTien = parseInt(item.gia) * parseInt(item.soluongsp);
                tongDonHang += tongThanhTien;

                return `
            <tr>
                <td>${index + 1}</td>
                <td><img style="width: 50px;" src="${item.hinh}" alt=""></td>
                <td>${item.tensp}</td>
                <td>${item.gia}</td>
                <td>${item.soluongsp}</td>
                <td>
                    <div>${tongThanhTien}</div>
                </td>
            </tr>
        `;
            });

            // Hiển thị tổng đơn hàng
            document.querySelector(".tong_don_hang").innerText = tongDonHang;
        }
        // Thực hiện cập nhật số lượng khi trang được tải
        document.addEventListener("DOMContentLoaded", function () {
            // Lấy dữ liệu từ localStorage
            let giohang = JSON.parse(localStorage.getItem("giohang")) || [];

            // Cập nhật số lượng trên biểu tượng giỏ hàng
            capNhatSoLuong(giohang.length);

            // load du lieu vo cart 
            loadDuLieuVoCarts();
        });


    </script>

</body>

</html>